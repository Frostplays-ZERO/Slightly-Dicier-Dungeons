var amjester = false;if(self.name == ~Jester~ || self.name == ~Witch~){amjester = true; trace(~How did you get this?~);};var slotsahoy = [];var cardpick = [];var add = [];   if(amjester != true){var eq = self.equipment;for(i in 0...eq.length){if(eq[i].skillcard == ~~){add = eq[i].slots;var exclude = [~SPARE1~|~SPARE2~|~SPARE3~|~SPARE4~|~SPARE5~|~SPARE6~|~LOCKED2~|~LOCKED3~|~LOCKED4~|~LOCKED5~|~LOCKED6~|~LOCKED7~];if(exclude.indexOf(add[0]) > -1){add = [];};if(add[0] == ~COUNTDOWN~){add = [~COUNTDOWN~|eq[i].countdown];}else if(eq[i].needstotal > 0){add = [~NEEDS~|eq[i].needstotal|eq[i].slots.length];};  if(add.length >= 1){cardpick.push(i);slotsahoy.push(add);};  };};}; trace(~Contenders: ~+slotsahoy); var randslot = 0;if(slotsahoy.length == 6){randslot = rand([0|1|2|3|4|5]);}else if(slotsahoy.length == 5){randslot = rand([0|1|2|3|4]);}else if(slotsahoy.length == 4){randslot = rand([0|1|2|3]);}else if(slotsahoy.length == 3){randslot = rand([0|1|2]);}else if(slotsahoy.length == 2){randslot = rand([0|1]);}else if(slotsahoy.length == 1){randslot = 0;};  slotsahoy = slotsahoy[randslot];cardpick = cardpick[randslot];if(amjester == true){trace(~I picked:~+Deck.getcard(cardpick).equipment.name+~'s ~+slotsahoy);} else {trace(~I picked:~+self.equipment[cardpick].name+~'s ~+slotsahoy);};  var dicegift = [];var diceboost = 0; var noactivation = 0; if(slotsahoy[0] == ~COUNTDOWN~){dicegift = [1];};  if(slotsahoy[0] == ~NEEDS~){var needs = slotsahoy[1];   var n = slotsahoy[2]; if(needs >= n){if (needs % n == 0) { for(i in 0...n){ dicegift.push((needs/n));}; } else { var splittable = needs - (needs % n);var remainder = needs % n;  		for(i in 0...n){ dicegift.push((splittable/n));}; var start = 0;while (remainder > 0){dicegift[start]++;start++;remainder--;};};};}; var matcharray = [~ODD~|~1~|~5~|~EVEN~|~1~|~6~|~MAX1~|~1~|~1~|~MAX2~|~1~|~2~|~MAX3~|~1~|~3~|~MAX4~|~1~|~4~|~MAX5~|~1~|~5~|~MIN2~|~1~|~6~|~MIN3~|~1~|~6~|~MIN4~|~1~|~6~|~MIN5~|~1~|~6~|~NORMAL~|~1~|~6~|~REQUIRE1~|~1~|~1~|~REQUIRE2~|~1~|~2~|~REQUIRE3~|~1~|~3~|~REQUIRE4~|~1~|~4~|~REQUIRE5~|~1~|~5~|~REQUIRE6~|~1~|~6~|~RANGE23~|~1~|~3~|~RANGE24~|~1~|~4~|~RANGE25~|~1~|~5~|~RANGE34~|~1~|~4~|~RANGE35~|~1~|~5~|~RANGE45~|~1~|~5~];  var dd = 0;for(i in 0...slotsahoy.length){if(slotsahoy[i] == ~DOUBLES~){if(dd == 0){dd = 6;}; dicegift.push(dd);}else if(matcharray.indexOf(slotsahoy[i]) > -1){ switch matcharray[matcharray.indexOf(slotsahoy[i])+1] {case ~1~:dicegift.push(matcharray[matcharray.indexOf(slotsahoy[i])+2]);};};};trace(~dicegift: ~+dicegift);  var flavourtext = rand([0|1|2|3|4|5|6|7|8|9]);var firsthalf = [~Go go ~|~Fire up ~|~Activate ~|~For your ~|~Let's see ~|~Unleash ~|~It's ~|~It's ~|~~|~Where's my ~];var secondhalf = [~!~|~!~|~!~|~!~|~!~|~!~|~ time!~|~ o'clock!~|~[;] I choose you!~|~?~];var jestersays = ~~;  if(amjester == true){jestersays = firsthalf[flavourtext]+Deck.getcard(cardpick).equipment.name+secondhalf[flavourtext];} else {jestersays =firsthalf[flavourtext]+self.equipment[cardpick].name+secondhalf[flavourtext];};  var space = ~ ~;var beta = jestersays.length;var offset =~~;for(i in 0...beta){offset = offset + space;};   var assignkludge = 0;if(amjester != true){if(dicegift.length >= 1){trace(jestersays); givedice(dicegift); 		for(i in 0...self.equipment[cardpick].assigneddice.length){if(self.equipment[cardpick].assigneddice[i] != null){assignkludge = 1;};};   if(assignkludge == 0){for(i in 0...dicegift.length){self.equipment[cardpick].assigndice(self.dicepool[self.dicepool.length-(i+1)]);};   self.equipment[cardpick].doequipmentaction(self[;]target[;]self.equipment[cardpick].castdirection[;] self.equipment[cardpick].assigneddice [;]0[;]false); };   } else {self.textparticle(~No dice!~);}; };